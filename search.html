<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zhr博客 - 搜索引擎</title>
    <link rel="icon" href="https://s41.ax1x.com/2025/12/07/pZnSiid.png" type="image/png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            padding: 20px;
        }
        
        .search-container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .search-header {
            background: #4285f4;
            color: white;
            padding: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .logo img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        
        .logo-text {
            font-size: 24px;
            font-weight: 500;
        }
        
        .url-info {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .search-box {
            background: white;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .search-form {
            display: flex;
            gap: 10px;
        }
        
        #searchInput {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #dfe1e5;
            border-radius: 24px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }
        
        #searchInput:focus {
            border-color: #4285f4;
            box-shadow: 0 1px 6px rgba(32,33,36,.28);
        }
        
        #searchButton {
            background: #4285f4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        #searchButton:hover {
            background: #3367d6;
        }
        
        .results-container {
            padding: 20px;
        }
        
        #resultsCount {
            color: #70757a;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .result-item {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-title {
            color: #1a0dab;
            font-size: 20px;
            margin-bottom: 5px;
            text-decoration: none;
        }
        
        .result-title:hover {
            text-decoration: underline;
        }
        
        .result-url {
            color: #006621;
            font-size: 14px;
            margin-bottom: 5px;
            word-break: break-all;
        }
        
        .result-excerpt {
            color: #545454;
            line-height: 1.5;
        }
        
        .highlight {
            background-color: #fff8e1;
            padding: 0 2px;
            border-radius: 2px;
        }
        
        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #70757a;
        }
        
        .quick-search {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .quick-search-btn {
            background: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 16px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quick-search-btn:hover {
            background: #e8eaed;
        }
        
        .copy-url {
            background: #34a853;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .copy-url:hover {
            background: #2e8b47;
        }
        
        @media (max-width: 600px) {
            .search-form {
                flex-direction: column;
            }
            
            #searchInput, #searchButton {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="search-container">
        <div class="search-header">
            <div class="logo">
                <img src="https://s41.ax1x.com/2025/12/07/pZnSiid.png" alt="Logo">
                <span class="logo-text">zhr博客搜索引擎</span>
            </div>
            <div class="url-info">
                <strong>使用方法：</strong> 直接访问 search.html?q=关键词 即可搜索<br>
                例如：<a href="?q=GitHub" style="color:white;text-decoration:underline">search.html?q=GitHub</a>
            </div>
        </div>
        
        <div class="search-box">
            <form class="search-form" id="searchForm">
                <input type="text" id="searchInput" placeholder="输入关键词搜索..." autocomplete="off">
                <button type="submit" id="searchButton">搜索</button>
            </form>
            
            <div class="quick-search">
                <button class="quick-search-btn" data-keyword="GitHub">GitHub</button>
                <button class="quick-search-btn" data-keyword="博客">博客</button>
                <button class="quick-search-btn" data-keyword="生活">生活</button>
                <button class="quick-search-btn" data-keyword="重庆">重庆</button>
                <button class="quick-search-btn" data-keyword="四季">四季</button>
                <button class="quick-search-btn" data-keyword="技术">技术</button>
            </div>
            
            <button class="copy-url" id="copyUrlBtn">复制搜索链接</button>
        </div>
        
        <div class="results-container">
            <div id="resultsCount">输入关键词开始搜索</div>
            <div id="resultsList">
                <div class="no-results">
                    请输入关键词搜索文章
                </div>
            </div>
        </div>
    </div>

    <script>
        // 文章数据库 - 简化版
        const articles = [
            {
                title: "使用GitHub Pages搭建个人博客",
                excerpt: "详细讲解如何使用GitHub Pages免费部署个人博客网站，包含HTML、CSS和GitHub配置...",
                url: "post.html",
                date: "2023-10-15",
                tags: ["技术", "GitHub"]
            },
            {
                title: "走出书本，对生活更有体会",
                excerpt: "书本中的世界固然是精彩的，但书本外的世界会更丰富。读过书后再走出书本，对生活会有更深的体会。",
                url: "post2.html",
                date: "2023-10-10",
                tags: ["生活", "感悟"]
            },
            {
                title: "四季的花",
                excerpt: "春有百花秋有月，夏有凉风冬有雪。四季更替，花儿也随之绽放，每一季都有独特的花卉装点我们的生活。",
                url: "post3.html",
                date: "2023-10-05",
                tags: ["自然", "生活", "随笔"]
            },
            {
                title: "去了一趟重庆 #1",
                excerpt: "2月，我终于有了机会，和同学去这个充满惊喜和美食的城市看看。",
                url: "post4.html",
                date: "2025-12-14",
                tags: ["旅行", "城市", "重庆"]
            },
            {
                title: "GitHub Actions自动化部署教程",
                excerpt: "学习如何使用GitHub Actions实现自动化部署，提高开发效率。",
                url: "post5.html",
                date: "2023-09-20",
                tags: ["技术", "GitHub", "教程"]
            },
            {
                title: "重庆美食探索记",
                excerpt: "记录在重庆品尝的各种美食，包括火锅、小面等特色小吃。",
                url: "post6.html",
                date: "2023-11-05",
                tags: ["旅行", "美食", "重庆"]
            },
            {
                title: "生活中的小确幸",
                excerpt: "记录日常生活中的美好瞬间，分享快乐和感动。",
                url: "post7.html",
                date: "2023-08-15",
                tags: ["生活", "随笔"]
            },
            {
                title: "Markdown写作指南",
                excerpt: "介绍Markdown语法及其在博客写作中的应用。",
                url: "post8.html",
                date: "2023-07-22",
                tags: ["技术", "教程", "写作"]
            }
        ];

        // 获取URL参数
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // 高亮文本
        function highlightText(text, keyword) {
            if (!keyword) return text;
            const regex = new RegExp(`(${keyword})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        // 执行搜索
        function performSearch(keyword) {
            if (!keyword) {
                document.getElementById('resultsCount').textContent = '输入关键词开始搜索';
                document.getElementById('resultsList').innerHTML = `
                    <div class="no-results">
                        请输入关键词搜索文章
                    </div>
                `;
                return;
            }

            // 更新URL
            const newUrl = `${window.location.pathname}?q=${encodeURIComponent(keyword)}`;
            window.history.pushState({ keyword }, '', newUrl);
            
            // 更新输入框
            document.getElementById('searchInput').value = keyword;

            // 搜索文章
            const results = articles.filter(article => {
                const searchText = `${article.title} ${article.excerpt} ${article.tags.join(' ')}`.toLowerCase();
                return searchText.includes(keyword.toLowerCase());
            });

            // 显示结果
            const resultsCount = document.getElementById('resultsCount');
            const resultsList = document.getElementById('resultsList');

            if (results.length === 0) {
                resultsCount.textContent = `没有找到与"${keyword}"相关的结果`;
                resultsList.innerHTML = `
                    <div class="no-results">
                        没有找到相关文章，尝试使用其他关键词
                    </div>
                `;
            } else {
                resultsCount.textContent = `找到 ${results.length} 条与"${keyword}"相关的结果`;

                let html = '';
                results.forEach(article => {
                    const highlightedTitle = highlightText(article.title, keyword);
                    const highlightedExcerpt = highlightText(article.excerpt, keyword);
                    
                    html += `
                        <div class="result-item">
                            <a href="${article.url}" class="result-title">${highlightedTitle}</a>
                            <div class="result-url">${window.location.origin}/${article.url}</div>
                            <div class="result-excerpt">${highlightedExcerpt}</div>
                            <div style="margin-top: 8px; font-size: 14px; color: #666;">
                                标签: ${article.tags.map(tag => `<span style="background: #e8eaed; padding: 2px 8px; border-radius: 12px; margin-right: 5px;">${tag}</span>`).join('')}
                                <span style="margin-left: 10px;">${article.date}</span>
                            </div>
                        </div>
                    `;
                });
                
                resultsList.innerHTML = html;
            }
        }

        // 页面加载时执行
        document.addEventListener('DOMContentLoaded', function() {
            const searchForm = document.getElementById('searchForm');
            const searchInput = document.getElementById('searchInput');
            const quickSearchBtns = document.querySelectorAll('.quick-search-btn');
            const copyUrlBtn = document.getElementById('copyUrlBtn');

            // 从URL获取搜索词
            const initialKeyword = getQueryParam('q');
            if (initialKeyword) {
                searchInput.value = initialKeyword;
                performSearch(initialKeyword);
            }

            // 表单提交
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const keyword = searchInput.value.trim();
                if (keyword) {
                    performSearch(keyword);
                }
            });

            // 快速搜索按钮
            quickSearchBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const keyword = this.getAttribute('data-keyword');
                    searchInput.value = keyword;
                    performSearch(keyword);
                });
            });

            // 复制URL
            copyUrlBtn.addEventListener('click', function() {
                const keyword = searchInput.value.trim();
                if (keyword) {
                    const url = `${window.location.origin}${window.location.pathname}?q=${encodeURIComponent(keyword)}`;
                    navigator.clipboard.writeText(url).then(() => {
                        alert('搜索链接已复制到剪贴板！');
                    }).catch(() => {
                        // 如果clipboard API不可用，使用备用方法
                        const tempInput = document.createElement('input');
                        tempInput.value = url;
                        document.body.appendChild(tempInput);
                        tempInput.select();
                        document.execCommand('copy');
                        document.body.removeChild(tempInput);
                        alert('搜索链接已复制到剪贴板！');
                    });
                } else {
                    alert('请输入搜索关键词');
                }
            });

            // 监听浏览器前进/后退
            window.addEventListener('popstate', function() {
                const keyword = getQueryParam('q');
                if (keyword) {
                    searchInput.value = keyword;
                    performSearch(keyword);
                } else {
                    searchInput.value = '';
                    performSearch('');
                }
            });
        });
    </script>
</body>
</html>
